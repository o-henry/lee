---
title: KNOCK 
date: '2024-10-13'
lastmod: '2024-10-13'
tags: ['iOS', 'SwiftUI']
draft: false 
summary: ''
images: []
---

[노크](https://apps.apple.com/kr/app/%EB%85%B8%ED%81%AC-%EC%9E%A5%EC%86%8C-%EC%A7%88%EB%AC%B8-%EB%8B%B5%EB%B3%80-%EC%86%8C%ED%86%B5/id6670785828) 라는 앱을 배포하면서 겪은 경험들을 정리해보겠습니다. 

* 개발인원 : 1명
* 기간 : 7개월

<br />
<br />

# Overview

1. 사용자들이 현재 위치 기반으로 소식을 공유하고 질문/답변 기능을 제공하는 앱 입니다.
    > 사실 초기 구현 목표는 사진을 업로드하는 기능을 기반으로 구현했었으나 서버리스의 비용문제로 인해 비즈니스 도메인을 변경했습니다.


<br />
<br />
<br />

# UI/UX

![figma](/static/images/knock/henry_fig.png)

> UI의 경우에는 figma를 통해 작업했는데 디자인 재능이나 지식이 부족하여 많은 시간이 소요됐습니다. 


<br />
<br />


# TECH STACK And Architecture

1. SwiftUI 사용.
2. iOS 17 이상을 빌드 타겟 으로 설정.
3. MVVM 패턴을 적용.
4. 기능 기반으로 폴더 구조를 설계.
5. OAuth 사용.
6. Push Notification 구현.
7. Firebase 사용.

<br />
<br />

# Feature
1. 사용자 현재 위치 기준 최대 3km 이내 위치한 사람이 작성한 글을 제공받을 수 있습니다.
2. 또 질문에 태그된 위치 기준 3km 이내에 위치한 경우에만 답글을 달 수 있습니다.
3. 질문은 검색창에 장소를 입력후 선택한 뒤 올릴 수 있습니다.

<br />
<br />

# Review
1. 사용자 현재 위치 기준 특정 거리 이내의 데이터만을 제공하기 위해서 사용한 기술이 Firebase의 GeoHash라는 기능인데 이 기능을 필수로 사용해야 하다보니
앱 자체 기능이 파이어베이스에 너무 의존하게 되는 문제가 발생했습니다. 이는 추후에 해결해야 할 문제입니다.
2. Push Notification의 경우, 사용자 A, B가 있고 A의 게시글에 B가 댓글을 추가했을 때 A에게 알림이 가도록 구현해야 했습니다.
이는 node.js 서버를 개발하여 해결했습니다.
3. 프로필 이미지를 파이어베이스 스토리지에 저장하고 있는데 사용량을 최소화하기 위해서 최대한 압축을 하고 있습니다. 
4. 이미지 선택시 사용자 갤러리에 접근하게 되는데 이 경우 이미지 개수로인해 hang이 발생하게 되는데 이를 최소화 하기 위해서 이미지를 lazy load 하도록 구현했습니다.
5. 구글 지도 서비스나 애플 지도 서비스는 한국에서 사용하기에는 길찾기나 GPS정확도가 떨어집니다. 이에 따라서 네이버나 카카오톡을 선택했습니다.